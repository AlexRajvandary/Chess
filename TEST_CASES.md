# Тестовые кейсы для шахматной игровой логики

## Оценка количества тестов: ~75-85 тестов

### 1. Инициализация игры (4 теста)
- [ ] Игра создается с правильной начальной позицией
- [ ] Белые ходят первыми
- [ ] Все фигуры на правильных позициях
- [ ] Игра не закончена при старте

### 2. Базовые ходы фигур (28 тестов)

#### Пешка (6 тестов)
- [ ] Пешка может ходить на одну клетку вперед
- [ ] Пешка может ходить на две клетки с начальной позиции
- [ ] Пешка не может ходить назад
- [ ] Пешка не может ходить вбок
- [ ] Пешка блокируется другой фигурой
- [ ] Пешка не может сделать двойной ход, если первая клетка занята

#### Ладья (5 тестов)
- [ ] Ладья может ходить по горизонтали
- [ ] Ладья может ходить по вертикали
- [ ] Ладья не может перепрыгивать через фигуры
- [ ] Ладья блокируется своими фигурами
- [ ] Ладья может ходить на любое расстояние по прямой

#### Конь (4 теста)
- [ ] Конь ходит буквой L
- [ ] Конь может перепрыгивать через фигуры
- [ ] Конь не может ходить на клетку со своей фигурой
- [ ] Конь имеет 8 возможных ходов в центре доски

#### Слон (5 тестов)
- [ ] Слон может ходить по диагонали
- [ ] Слон не может перепрыгивать через фигуры
- [ ] Слон блокируется своими фигурами
- [ ] Слон может ходить на любое расстояние по диагонали
- [ ] Белый слон остается на белых клетках, черный на черных

#### Ферзь (5 тестов)
- [ ] Ферзь может ходить по горизонтали
- [ ] Ферзь может ходить по вертикали
- [ ] Ферзь может ходить по диагонали
- [ ] Ферзь не может перепрыгивать через фигуры
- [ ] Ферзь блокируется своими фигурами

#### Король (3 теста)
- [ ] Король может ходить на одну клетку в любом направлении
- [ ] Король не может ходить на атакованную клетку
- [ ] Король блокируется своими фигурами

### 3. Валидация ходов (10 тестов)
- [ ] Нельзя ходить не своей фигурой
- [ ] Нельзя ходить фигурой противника
- [ ] Нельзя ходить в свою фигуру
- [ ] Нельзя ходить за пределы доски
- [ ] Нельзя оставлять короля под шахом (блокировка хода)
- [ ] Нельзя ходить, если король уже под шахом и ход не убирает шах
- [ ] Можно ходить, если ход убирает шах
- [ ] Можно блокировать шах другой фигурой
- [ ] Нельзя ходить, если игра закончена
- [ ] Валидация работает для всех типов фигур

### 4. Взятие фигур (6 тестов)
- [ ] Пешка может брать фигуру по диагонали
- [ ] Ладья может брать фигуру по горизонтали/вертикали
- [ ] Конь может брать фигуру
- [ ] Слон может брать фигуру по диагонали
- [ ] Ферзь может брать фигуру в любом направлении
- [ ] Король может брать фигуру
- [ ] Взятая фигура помечается как мертвая
- [ ] Взятая фигура удаляется из списка доступных ходов

### 5. Рокировка (10 тестов)
- [ ] Короткая рокировка белых выполняется правильно
- [ ] Длинная рокировка белых выполняется правильно
- [ ] Короткая рокировка черных выполняется правильно
- [ ] Длинная рокировка черных выполняется правильно
- [ ] Нельзя делать рокировку, если король уже ходил
- [ ] Нельзя делать рокировку, если ладья уже ходила
- [ ] Нельзя делать рокировку через атакованные клетки
- [ ] Нельзя делать рокировку, если король под шахом
- [ ] Нельзя делать рокировку, если между королем и ладьей есть фигуры
- [ ] После рокировки король и ладья помечаются как ходившие

### 6. Взятие на проходе (En Passant) (8 тестов)
- [ ] Белая пешка может взять черную пешку на проходе
- [ ] Черная пешка может взять белую пешку на проходе
- [ ] Взятие на проходе возможно только сразу после двойного хода
- [ ] Взятие на проходе возможно только если пешки на одной горизонтали
- [ ] Взятие на проходе возможно только если пешки соседние по горизонтали
- [ ] Взятие на проходе невозможно, если прошло больше одного хода
- [ ] Взятие на проходе правильно перемещает пешку
- [ ] Взятая пешка правильно удаляется

### 7. Шах (8 тестов)
- [ ] Шах определяется правильно (король под атакой)
- [ ] Шах определяется для белого короля
- [ ] Шах определяется для черного короля
- [ ] Шах может быть от любой фигуры
- [ ] Шах может быть от нескольких фигур одновременно
- [ ] После хода, убирающего шах, IsCheck становится false
- [ ] Ход, создающий шах, помечается как IsCheck = true
- [ ] GetValidMoves не возвращает ходы, оставляющие короля под шахом

### 8. Мат (8 тестов)
- [ ] Мат определяется правильно (шах + нет ходов)
- [ ] Мат для белого короля
- [ ] Мат для черного короля
- [ ] Мат заканчивает игру (IsGameOver = true)
- [ ] После мата нельзя делать ходы
- [ ] Классический мат (ферзь + король)
- [ ] Мат двумя ладьями
- [ ] Мат конем и слоном

### 9. История ходов (4 теста)
- [ ] Ходы записываются в историю
- [ ] История содержит правильную информацию о ходе
- [ ] История содержит информацию о взятии фигуры
- [ ] История содержит информацию о шахе/мате

### 10. FEN нотация (3 теста)
- [ ] FEN генерируется правильно для начальной позиции
- [ ] FEN обновляется после ходов
- [ ] FEN содержит информацию о текущем игроке

### 11. Граничные случаи (6 тестов)
- [ ] Ход несуществующей фигурой возвращает ошибку
- [ ] Ход мертвой фигурой возвращает ошибку
- [ ] Ход в ту же клетку возвращает ошибку
- [ ] GetValidMoves возвращает пустой список для несуществующей фигуры
- [ ] GetValidMoves возвращает пустой список для фигуры противника
- [ ] Переключение игрока происходит после каждого хода

### 12. Дополнительные сценарии (5 тестов)
- [ ] Пешка не может сделать двойной ход, если вторая клетка занята
- [ ] Фигура не может "съесть" свою фигуру
- [ ] Король не может ходить на атакованную клетку
- [ ] Проверка всех доступных ходов для фигуры
- [ ] Проверка состояния игры (GetState)

**Итого: ~85 тестов**